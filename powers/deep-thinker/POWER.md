---
name: "deep-thinker"
displayName: "Deep Thinker - 深度思考助手"
description: "让 AI 在分析问题时进行深度思考，从产品全局视角理解问题，系统性定位根因并找到正确的修复位置"
keywords: ["debug", "analysis", "troubleshooting", "deep-thinking", "root-cause"]
author: "Johnny"
---

# Deep Thinker - 深度思考助手

## Overview

这个 Power 帮助 AI 在处理项目问题时进行**深度思考**，而不是浅尝辄止。

核心理念：**先理解全局，再解决局部**

## 为什么需要深度思考？

AI 常见的问题分析模式：
- ❌ 看到错误信息就直接改代码
- ❌ 头痛医头，脚痛医脚
- ❌ 不理解这个 bug 对产品功能的影响
- ❌ 修复了表面问题，引入了新问题

深度思考模式：
- ✅ 先理解项目是做什么的
- ✅ 理解各模块如何协作
- ✅ 从产品角度分析问题影响
- ✅ 找到问题的根本原因
- ✅ 在正确的位置修复

## Available Steering Files

- **problem-analysis** - 问题分析工作流：从表象到根因的系统性分析
- **project-understanding** - 项目理解工作流：快速建立项目全局认知

## 核心工作流

### 第一步：建立项目认知

在分析任何问题之前，先回答这些问题：

```
1. 这个项目是做什么的？（产品目标）
2. 主要功能模块有哪些？（架构概览）
3. 各模块之间如何协作？（数据流/调用关系）
4. 当前问题涉及哪个功能？（定位范围）
```

**信息来源优先级：**
1. README.md / 项目文档
2. 目录结构和文件命名
3. 配置文件（package.json, tsconfig.json 等）
4. 核心代码文件

### 第二步：问题分层分析

```
┌─────────────────────────────────────────┐
│  第四层：产品影响                         │
│  这个问题影响什么用户功能？严重程度？        │
├─────────────────────────────────────────┤
│  第三层：架构影响                         │
│  涉及哪些模块？模块间依赖关系？             │
├─────────────────────────────────────────┤
│  第二层：代码上下文                       │
│  相关类型定义？状态管理？API 调用？         │
├─────────────────────────────────────────┤
│  第一层：表面现象                         │
│  错误信息是什么？哪个文件/行号？            │
└─────────────────────────────────────────┘
```

**从下往上分析，从上往下修复**

### 第三步：根因定位

问自己这些问题：

```
1. 这个错误是症状还是原因？
2. 如果只修复这里，会不会在别处出问题？
3. 是否有更上游的地方才是真正的问题源头？
4. 这个问题是偶发还是必现？什么条件触发？
```

### 第四步：修复验证

修复前确认：
- [ ] 已理解问题的根本原因
- [ ] 已考虑对其他模块的影响
- [ ] 修复位置是正确的（不是打补丁）

修复后验证：
- [ ] 原问题已解决
- [ ] 没有引入新问题
- [ ] 相关功能仍然正常

## 常见问题模式

### 模式 1：类型不匹配
```
表象：TypeScript 报错 "Type 'X' is not assignable to type 'Y'"
常见根因：
- 上游数据源返回了意外的类型
- 类型定义与实际数据不一致
- 可选属性没有正确处理
```

### 模式 2：状态不同步
```
表象：UI 显示的数据与预期不符
常见根因：
- 状态更新后没有触发重渲染
- 多个状态源不一致
- 异步操作的竞态条件
```

### 模式 3：异步错误
```
表象：Promise rejection / undefined 错误
常见根因：
- 没有正确处理异步错误
- 组件卸载后仍在更新状态
- 依赖的数据还没准备好
```

### 模式 4：构建/编译错误
```
表象：npm run build 失败
常见根因：
- 导入路径错误
- 缺少依赖
- 配置文件问题
```

## 深度思考检查清单

遇到问题时，按顺序过一遍：

### 理解阶段
- [ ] 我知道这个项目是做什么的吗？
- [ ] 我知道当前问题涉及哪个功能吗？
- [ ] 我知道相关模块的职责和边界吗？

### 分析阶段
- [ ] 错误信息告诉我什么？
- [ ] 这是编译错误还是运行时错误？
- [ ] 问题是必现还是偶发？
- [ ] 最近有什么改动可能导致这个问题？

### 定位阶段
- [ ] 数据流是怎样的？从哪里来到哪里去？
- [ ] 涉及哪些文件？它们的依赖关系？
- [ ] 问题出在数据源、处理逻辑、还是展示层？

### 修复阶段
- [ ] 我要修复的是根因还是症状？
- [ ] 这个修复会影响其他地方吗？
- [ ] 有没有更优雅的解决方案？

## 知识边界：什么时候该查外部资料？

AI 像实习生，有知识边界。遇到以下情况，**必须查外部资料**，不要瞎猜：

### 必须查资料的场景

```
1. 框架/库的特定 API 用法
   - 不确定某个函数的参数、返回值
   - 不知道某个配置项的作用
   → 查官方文档

2. 错误信息不理解
   - 从没见过的错误
   - 错误信息很模糊
   → 搜索错误信息 + 框架名

3. 最佳实践不确定
   - 不知道推荐的做法是什么
   - 有多种实现方式，不知道选哪个
   → 查官方文档或社区讨论

4. 版本兼容性问题
   - 不确定某个特性在当前版本是否支持
   - 升级后行为可能变化
   → 查 changelog 或迁移指南

5. 平台特定问题
   - 浏览器兼容性
   - 操作系统差异
   - 运行环境限制
   → 查 MDN、Can I Use、平台文档
```

### 查资料的优先级

```
1. 官方文档（最权威）
2. GitHub Issues / Discussions（真实问题和解决方案）
3. Stack Overflow（社区验证的答案）
4. 技术博客（注意发布日期，可能过时）
```

### 查资料的正确姿势

```
❌ 错误：直接搜 "react not working"
✅ 正确：搜 "react useEffect cleanup function not called" + 版本号

❌ 错误：看到一个答案就用
✅ 正确：看多个答案，理解原理，确认适用于当前场景

❌ 错误：复制粘贴代码
✅ 正确：理解代码做了什么，适配到当前项目
```

### 承认不知道

当遇到以下情况，**直接告诉用户**：

```
"这个问题我不太确定，建议查一下 [具体文档/资源]"
"这个 API 的行为我需要确认，让我查一下官方文档"
"这个错误我没见过，我来搜索一下相关信息"
```

**诚实比瞎猜更有价值。**

## Best Practices

1. **先读文档再看代码** - README 和项目文档能快速建立全局认知
2. **从入口追踪** - 找到功能入口，顺着数据流追踪
3. **善用搜索** - 搜索错误信息、函数名、变量名
4. **画依赖图** - 复杂问题时，画出模块依赖关系
5. **小步验证** - 每改一点就验证，不要一次改太多
6. **写下思考过程** - 帮助理清思路，也方便回顾
7. **知道边界** - 不确定的事情去查，不要猜

## 使用场景

- 调试复杂 bug
- 理解陌生代码库
- 代码审查
- 重构前的影响分析
- 性能问题定位

## 核心原则

```
┌─────────────────────────────────────────────────┐
│                                                 │
│   深度思考 ≠ 闭门造车                            │
│                                                 │
│   1. 先理解问题（项目上下文）                     │
│   2. 分层分析（从表象到根因）                     │
│   3. 识别知识边界（我知道什么，不知道什么）        │
│   4. 主动获取外部知识（不懂就查，不要猜）          │
│   5. 验证解决方案（确保真的解决了问题）            │
│                                                 │
└─────────────────────────────────────────────────┘
```

**记住：好的实习生不是什么都懂，而是知道自己不懂什么，并且会主动去学。**
