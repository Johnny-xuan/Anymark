.popup{width:100%;min-height:auto;height:auto;max-height:none;background:var(--bg-primary);display:flex;flex-direction:column;overflow:visible;border-radius:0;box-sizing:border-box}.popup-header{display:flex;align-items:center;justify-content:space-between;padding:var(--space-md) var(--space-lg);background:var(--bg-secondary);border-bottom:1px solid var(--border-subtle);flex-shrink:0}.popup-header h2{font-size:var(--font-size-lg);font-weight:600;color:var(--text-primary)}.header-actions{display:flex;gap:var(--space-xs)}.theme-toggle-button,.close-button{width:28px;height:28px;display:flex;align-items:center;justify-content:center;background:transparent;border:1px solid transparent;border-radius:var(--radius-sm);color:var(--text-tertiary);cursor:pointer;transition:all var(--duration-fast) var(--ease-smooth)}.theme-toggle-button:hover{background:var(--selection);border-color:var(--accent-primary);color:var(--accent-primary)}.close-button:hover{background:#ef44441a;border-color:var(--error);color:var(--error)}.popup-content{flex:1;padding:var(--space-lg);overflow-y:auto;display:flex;flex-direction:column;gap:var(--space-md);min-height:0}.page-info{display:flex;gap:var(--space-sm);padding:var(--space-sm);background:var(--bg-secondary);border:1px solid var(--border-subtle);border-radius:var(--radius-md);transition:all var(--duration-fast) var(--ease-smooth)}.page-info:hover{border-color:var(--border-default);background:var(--bg-tertiary)}.page-favicon{width:28px;height:28px;flex-shrink:0;border-radius:var(--radius-sm);object-fit:cover}.page-details{flex:1;display:flex;flex-direction:column;gap:var(--space-xs);min-width:0}.page-title-input,.page-url-input{width:100%;background:transparent;border:none;padding:var(--space-xs) 0;color:var(--text-primary);font-size:var(--font-size-sm);transition:all var(--duration-fast) var(--ease-smooth)}.page-title-input{font-weight:500}.page-title-input:focus,.page-url-input:focus{outline:none}.page-url-input{color:var(--text-tertiary);font-size:var(--font-size-xs)}.form-group{display:flex;flex-direction:column;gap:var(--space-sm)}.form-group label{display:flex;align-items:center;gap:var(--space-sm);font-size:var(--font-size-sm);font-weight:500;color:var(--text-secondary)}.form-group label svg{color:var(--accent-primary)}.folder-select{position:relative;display:flex;gap:var(--space-xs)}.folder-select input{flex:1;background:var(--bg-secondary);border:1px solid var(--border-subtle);border-radius:var(--radius-sm);padding:var(--space-sm) var(--space-md);color:var(--text-primary);font-size:var(--font-size-sm);transition:all var(--duration-fast) var(--ease-smooth)}.folder-select input:focus{outline:none;border-color:var(--accent-primary);background:var(--bg-tertiary)}.select-button{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:var(--bg-secondary);border:1px solid var(--border-subtle);border-radius:var(--radius-sm);color:var(--text-tertiary);cursor:pointer;transition:all var(--duration-fast) var(--ease-smooth)}.select-button:hover{border-color:var(--accent-primary);color:var(--accent-primary);background:var(--bg-tertiary)}.folder-dropdown{position:absolute;top:calc(100% + var(--space-xs));left:0;right:var(--select-button-width, 42px);max-height:200px;overflow-y:auto;background:var(--bg-elevated);border:1px solid var(--border-default);border-radius:var(--radius-md);box-shadow:var(--shadow-lg);z-index:var(--z-dropdown);animation:slide-in-down var(--duration-fast) var(--ease-smooth)}.folder-item{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md);color:var(--text-secondary);font-size:var(--font-size-sm);cursor:pointer;transition:all var(--duration-fast) var(--ease-smooth)}.folder-item:hover{background:var(--bg-tertiary);color:var(--text-primary)}.folder-item.selected{background:var(--selection);color:var(--accent-primary);font-weight:500}.folder-item.highlighted{background:var(--selection-hover);color:var(--text-primary);outline:2px solid var(--accent-primary);outline-offset:-2px}.folder-item svg{color:var(--accent-primary);flex-shrink:0}.folder-item.new-folder{background:var(--selection);border:1px solid var(--accent-primary);border-radius:var(--radius-sm);color:var(--text-primary);font-weight:500}.folder-item.new-folder:hover{background:var(--selection-hover)}.folder-item.new-folder strong{color:var(--accent-primary);font-weight:600}.folder-item.new-folder svg{color:var(--accent-primary)}.folder-item.no-results{color:var(--text-muted);font-style:italic;cursor:default;text-align:center}.folder-item.no-results:hover{background:transparent;color:var(--text-muted)}.suggestion{font-size:var(--font-size-xs);color:var(--text-tertiary);padding:var(--space-sm);background:var(--selection);border:1px solid var(--accent-primary);border-radius:var(--radius-sm);display:flex;align-items:center;gap:var(--space-sm)}.suggestion button{background:none;border:none;color:var(--accent-primary);font-weight:500;cursor:pointer;text-decoration:underline;transition:color var(--duration-fast) var(--ease-smooth)}.suggestion button:hover{color:var(--accent-hover)}.tags-container{display:flex;flex-direction:column;gap:var(--space-md);padding:var(--space-md);background:var(--bg-secondary);border:1px solid var(--border-subtle);border-radius:var(--radius-lg)}.tags-list{display:flex;flex-wrap:wrap;gap:var(--space-sm);min-height:32px}.tag-chip{display:inline-flex;align-items:center;gap:var(--space-xs);padding:var(--space-xs) var(--space-md);background:var(--bg-tertiary);border:1px solid var(--accent-primary);border-radius:var(--radius-lg);color:var(--accent-primary);font-size:var(--font-size-xs);font-weight:500;transition:all var(--duration-fast) var(--ease-smooth)}.tag-chip:hover{background:var(--selection)}.tag-remove{width:14px;height:14px;display:flex;align-items:center;justify-content:center;background:transparent;border:none;border-radius:50%;color:var(--accent-primary);cursor:pointer;transition:all var(--duration-fast) var(--ease-smooth);padding:0}.tag-remove:hover{background:var(--accent-primary);color:var(--bg-primary)}.tag-input-row{display:flex;gap:var(--space-sm)}.tag-input-field{flex:1;background:var(--bg-primary);border:1px solid var(--border-subtle);border-radius:var(--radius-md);padding:var(--space-sm) var(--space-md);color:var(--text-primary);font-size:var(--font-size-sm);transition:all var(--duration-fast) var(--ease-smooth)}.tag-input-field:focus{outline:none;border-color:var(--accent-primary);background:var(--bg-tertiary)}.tag-add-button{width:32px;height:32px;display:flex;align-items:center;justify-content:center;background:var(--accent-primary);border:none;border-radius:var(--radius-md);color:#fff;font-size:16px;font-weight:600;cursor:pointer;transition:all var(--duration-fast) var(--ease-smooth)}.tag-add-button:hover:not(:disabled){background:var(--accent-hover)}.tag-add-button:disabled{opacity:.3;cursor:not-allowed}.ai-results{padding:var(--space-md);background:linear-gradient(135deg,var(--bg-secondary) 0%,rgba(59,130,246,.05) 100%);border:1px solid var(--accent-primary);border-radius:var(--radius-lg);position:relative;overflow:hidden}.ai-results:before{content:"";position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--accent-primary),var(--accent-hover))}.ai-header{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-md);font-size:var(--font-size-sm);font-weight:600;color:var(--accent-primary)}.ai-header svg{color:var(--accent-primary);animation:pulse 2s ease-in-out infinite}@keyframes pulse{0%,to{opacity:1}50%{opacity:.6}}.confidence{margin-left:auto;padding:var(--space-xs) var(--space-sm);background:linear-gradient(135deg,var(--accent-primary),var(--accent-hover));border-radius:var(--radius-sm);color:#fff;font-size:var(--font-size-xs);font-weight:600}.summary-textarea{width:100%;min-height:80px;background:var(--bg-primary);border:1px solid var(--border-subtle);border-radius:var(--radius-md);padding:var(--space-md);color:var(--text-primary);font-size:var(--font-size-sm);line-height:var(--line-height-normal);resize:vertical;transition:all var(--duration-fast) var(--ease-smooth)}.summary-textarea:focus{outline:none;border-color:var(--accent-primary);background:var(--bg-tertiary)}.ai-meta{display:flex;flex-direction:column;gap:var(--space-sm);margin-top:var(--space-md)}.meta-item{display:flex;align-items:center;gap:var(--space-md);font-size:var(--font-size-sm)}.meta-label{color:var(--text-tertiary);font-weight:500;min-width:80px}.meta-value{flex:1}.category-badge,.difficulty-badge{display:inline-block;padding:var(--space-xs) var(--space-sm);background:var(--selection);border:1px solid var(--accent-primary);border-radius:var(--radius-sm);color:var(--accent-primary);font-size:var(--font-size-xs);font-weight:600}.tech-stack{flex-direction:column;align-items:flex-start}.tech-tags{display:flex;flex-wrap:wrap;gap:var(--space-xs)}.tech-tag{padding:var(--space-xs) var(--space-sm);background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-sm);color:var(--text-secondary);font-size:var(--font-size-xs);font-weight:500}.popup-footer{display:flex;gap:var(--space-md);padding:var(--space-md) var(--space-lg);background:var(--bg-secondary);border-top:1px solid var(--border-subtle);flex-shrink:0}.button{flex:1;height:40px;display:flex;align-items:center;justify-content:center;gap:var(--space-sm);border:none;border-radius:var(--radius-md);font-size:var(--font-size-sm);font-weight:600;cursor:pointer;transition:all var(--duration-fast) var(--ease-smooth)}.button-secondary{background:var(--bg-tertiary);border:1px solid var(--border-default);color:var(--text-secondary)}.button-secondary:hover{background:var(--bg-elevated);border-color:var(--text-tertiary);color:var(--text-primary)}.button-primary{background:var(--accent-primary);color:#fff}.button-primary:hover{background:var(--accent-hover)}.button-primary:active{background:var(--accent-active)}.button-primary:disabled{opacity:.5;cursor:not-allowed}.popup-hint{padding:var(--space-sm) var(--space-lg);text-align:center;font-size:var(--font-size-xs);color:var(--text-muted);background:var(--bg-secondary);border-top:1px solid var(--border-subtle);flex-shrink:0}.keyboard-hints kbd{display:inline-flex;align-items:center;justify-content:center;min-width:18px;height:18px;padding:0 4px;font-family:var(--font-mono);font-size:10px;font-weight:500;color:var(--text-tertiary);background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-sm)}.popup-actions{display:flex;align-items:center;justify-content:space-between;padding:var(--space-sm) var(--space-lg);background:var(--bg-secondary);border-top:1px solid var(--border-subtle);flex-shrink:0}.action-button{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:transparent;border:1px solid var(--border-subtle);border-radius:var(--radius-sm);color:var(--text-secondary);font-size:var(--font-size-xs);cursor:pointer;transition:all var(--duration-fast) var(--ease-smooth)}.action-button:hover{background:var(--bg-tertiary);border-color:var(--accent-primary);color:var(--accent-primary)}.popup-loading,.popup-analyzing,.popup-error{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-2xl);text-align:center;min-height:200px}.popup-loading p,.popup-analyzing h3{margin-top:var(--space-md);color:var(--text-secondary);font-size:var(--font-size-base)}.popup-analyzing h3{color:var(--text-primary);font-weight:600}.spin{animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.analysis-steps{display:flex;flex-direction:column;gap:var(--space-sm);margin-top:var(--space-lg);text-align:left}.analysis-steps .step{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:var(--bg-secondary);border-radius:var(--radius-sm);color:var(--text-tertiary);font-size:var(--font-size-sm);transition:all var(--duration-fast) var(--ease-smooth)}.analysis-steps .step.active{background:var(--selection);color:var(--accent-primary);font-weight:500}.analysis-steps .step.done{background:#10b9811a;color:var(--success)}.analysis-hint{margin-top:var(--space-lg);font-size:var(--font-size-xs);color:var(--text-muted)}.popup-error p{color:var(--error);margin-bottom:var(--space-md)}.popup-error button{padding:var(--space-sm) var(--space-lg);background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-md);color:var(--text-primary);cursor:pointer;transition:all var(--duration-fast) var(--ease-smooth)}.popup-error button:hover{background:var(--bg-elevated)}.popup-menu{margin:0;padding:0;width:260px;min-width:260px;max-width:260px;background:var(--bg-primary, #1a1a1a);display:flex;flex-direction:column}.menu-header{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md) var(--space-lg);border-bottom:1px solid var(--border-subtle);background:var(--bg-secondary)}.menu-logo{width:24px;height:24px;border-radius:var(--radius-sm)}.menu-title{font-size:var(--font-size-base);font-weight:600;color:var(--text-primary)}.menu-items{padding:var(--space-xs);padding-bottom:var(--space-xs)}.menu-item{display:flex;align-items:center;gap:var(--space-sm);width:100%;padding:var(--space-sm) var(--space-md);background:transparent;border:none;border-radius:0;color:var(--text-secondary);font-size:var(--font-size-sm);font-family:var(--font-sans);cursor:pointer;transition:all var(--duration-fast) var(--ease-smooth);text-align:left}.menu-item:hover{background:var(--bg-hover);color:var(--text-primary)}.menu-item:active{transform:scale(.98)}.menu-item svg{flex-shrink:0;color:var(--text-tertiary);transition:color var(--duration-fast) var(--ease-smooth)}.menu-item:hover svg{color:var(--text-secondary)}.menu-item span{flex:1}.menu-item kbd{display:inline-block;padding:2px 5px;font-family:var(--font-mono);font-size:10px;font-weight:500;line-height:1;color:var(--text-tertiary);background:var(--bg-tertiary);border:1px solid var(--border-default);border-radius:var(--radius-sm)}.menu-item.primary{background:var(--selection);color:var(--accent-primary)}.menu-item.primary svg{color:var(--accent-primary)}.menu-item.primary:hover{background:var(--selection-hover)}.menu-item.primary kbd{background:var(--accent-primary);color:#fff;border-color:var(--accent-primary)}.menu-divider{height:1px;margin:var(--space-xs) var(--space-md);background:var(--border-subtle)}.popup-menu{animation:menu-appear var(--duration-fast) var(--ease-smooth)}@keyframes menu-appear{0%{opacity:0;transform:scale(.95) translateY(-4px)}to{opacity:1;transform:scale(1) translateY(0)}}
