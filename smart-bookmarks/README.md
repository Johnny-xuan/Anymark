# AnyMark - 收藏自由 - 智能书签管理器

🎉 **100%免费开源 | AI驱动 | 完全本地化 | 隐私优先**

一款现代化的 Chrome 书签管理扩展，结合 AI 智能分析与传统书签管理的最佳实践，让书签管理变得简单高效。

## ✨ 核心特性

### 🤖 智能 AI 功能
- **AI 智能助手** - 自然语言对话，像图书管理员一样帮你管理书签
  - 对话式搜索："找一个 Python 教程"
  - 智能收集："把所有 AI 相关的书签归类"
  - 自动整理："帮我整理一下所有书签"
  - 自然聊天：可以闲聊、提问，不仅是工具
  - 记忆对话：自动保存最近 50 条对话历史
- **AI 自动分析** - 自动识别网页内容并生成摘要、标签和分类
- **智能分类** - 技术文档、工具、教程、新闻等多维度分类
- **自定义 AI 模型** - 支持所有兼容 OpenAI API 的模型

### 📚 书签管理
- **Chrome 同步** - 与 Chrome 原生书签实时双向同步
- **文件夹管理** - 智能分类和层级管理，拖拽整理
- **星标收藏** - 快速标记重要书签
- **软删除** - 回收站机制，误删可恢复
- **批量操作** - 批量移动、删除、标记
- **导入导出** - 支持 JSON 格式备份恢复

### 🔍 智能搜索
- **实时搜索** - 模糊搜索，支持拼音和高亮
- **多维过滤** - Chrome书签、AI分类、星标、最近、热门等
- **标签过滤** - 按 AI 标签和用户标签筛选
- **文件夹导航** - 树形结构浏览

### ⚡ 高效交互
- **完整键盘导航** - Vim 风格快捷键 (j/k/Space/Enter)
- **侧边栏预览** - 可调节大小的预览面板
- **快捷操作** - `Ctrl+Shift+B` 打开侧边栏，`Alt+A` 唤起 AI 助手
- **上下文菜单** - 右键快捷操作

### 🎨 用户体验
- **双主题** - 明暗主题自由切换，自动跟随系统
- **响应式设计** - 适配不同屏幕尺寸
- **拖拽排序** - 直观的拖拽操作
- **无需注册** - 完全本地化，保护隐私

## 🚀 AI功能配置

### 选项1：使用本地分析（默认）
- 无需配置，立即可用
- 基于关键词的智能分类
- 完全免费，离线可用

### 选项2：配置自定义AI模型（推荐）
1. 点击扩展图标打开侧边栏
2. 点击右上角设置按钮 ⚙️
3. 在"🤖 AI 模型配置"中：
   - **设置API URL**：选择您的AI服务商端点
   - **设置模型ID**：输入具体模型名称
   - **添加API Key**：粘贴您的密钥
4. 保存设置，开始享受AI智能分析

**支持的AI服务商**：

| 服务商 | API URL | 推荐模型 | 特点 |
|------|------|------|------|
| **通义千问** | `https://dashscope.aliyuncs.com/compatible-mode/v1` | `qwen-turbo` | 性价比高 |
| **豆包** | `https://ark.cn-beijing.volces.com/api/v3` | `doubao-lite-4k` | 速度快 |
| **Kimi** | `https://api.moonshot.cn/v1` | `moonshot-v1-8k` | 长文本 |
| **OpenAI** | `https://api.openai.com/v1` | `gpt-3.5-turbo` | 稳定性好 |
| **Claude** | `https://api.anthropic.com/v1` | `claude-3-haiku` | 理解力强 |

**成本对比**（每1K tokens）：

- 通义千问：~¥0.008 ⭐⭐⭐⭐⭐
- 豆包：~¥0.006 ⭐⭐⭐⭐⭐
- Kimi：~¥0.012 ⭐⭐⭐⭐
- OpenAI：~¥0.027 ⭐⭐

📖 **详细配置指南**: [CUSTOM_AI_CONFIG.md](CUSTOM_AI_CONFIG.md)

**API Key获取**：

- 通义千问：[https://dashscope.console.aliyun.com/](https://dashscope.console.aliyun.com/)
- 豆包：[https://www.volcengine.com/product/doubao](https://www.volcengine.com/product/doubao)
- OpenAI：[https://platform.openai.com/api-keys](https://platform.openai.com/api-keys)
- Claude：[https://console.anthropic.com/](https://console.anthropic.com/)
- Kimi：[https://platform.moonshot.cn/](https://platform.moonshot.cn/)

## 🚀 快速开始

### 安装

1. 克隆或下载此项目
2. 安装依赖:
```bash
npm install
```

3. 构建扩展:
```bash
npm run build
```

4. 在Chrome中加载:
   - 打开 `chrome://extensions/`
   - 启用"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择 `dist/` 目录

### 使用

#### 基本操作
- **打开侧边栏**: `Ctrl+Shift+B` (Mac: `Cmd+Shift+B`)
- **唤起 AI 助手**: `Alt+A`
- **快速保存**: `Ctrl+J` (Mac: `Cmd+J`)
- **搜索**: 按 `/` 键开始搜索
- **帮助**: 按 `H` 或 `?` 键查看所有快捷键

#### AI 助手使用
1. 按 `Alt+A` 打开智能助手
2. 试试说：
   - "找一个 Python 教程"
   - "把当前网页保存一下"
   - "把所有 AI 相关的书签归类"
   - "帮我整理一下所有书签"
   - 甚至可以闲聊："你好"、"你能做什么"
3. AI 会自动执行操作并反馈结果
4. 对话历史自动保存（最多 50 条），可以手动清空

#### 过滤器使用
- **Chrome**: 显示与 Chrome 原生书签管理器同步的书签
- **AI分类**: 按 AI 智能分类显示（技术文档、工具、教程等）
- **星标**: 显示星标书签
- **最近**: 最近添加的书签
- **热门**: 访问次数最多的书签
- **回收站**: 已删除的书签

## 🎯 功能详解

### 🤖 AI 智能助手
像图书管理员一样的 AI 助手，通过自然语言对话帮你管理书签：

**支持的操作**：
- 🔍 **搜索书签**: "找一个 React 文档"、"我之前收藏过 Python 教程"
- 💾 **添加书签**: "把当前网页保存一下"、"收藏这个页面"
  - AI 自动分析页面内容（摘要、标签、分类）
  - 弹出确认对话框，可编辑或直接保存
  - 推荐存放文件夹，智能归类
- 📁 **收集归类**: "把所有 AI 相关的书签归类"、"收集 Python 教程"
- ✨ **智能整理**: "帮我整理一下所有书签"、"自动分类"
- 🌟 **推荐资源**: "推荐一些前端学习资料"
- 🔗 **打开书签**: "打开那个 React 文档"
- 🗨️ **自由聊天**: 可以闲聊、提问，像朋友一样对话

**特性**：
- Agent Loop 工作模式：意图识别 → 执行操作 → 反馈结果
- AI 分析确认对话框：保存前可预览和编辑 AI 分析结果
  - 查看推荐存放位置、AI 标签、内容摘要
  - 支持编辑标题、文件夹、标签、摘要
  - 三个操作选项：✅ 确认保存、✏️ 编辑、❌ 取消
- 自动识别意图，区分聊天和操作指令
- 操作完成后自动刷新，看到实时变化
- 支持历史上下文（最多 50 条），连贯对话
- 对话历史持久化保存，手动清除才会删除

### 📚 书签管理

**Chrome 同步**：
- 实时双向同步：管理器和 Chrome 书签保持一致
- 手动刷新：合并管理器和 Chrome 书签（取并集）
- 智能去重：相同 URL + 相同目录只保留一个

**文件夹管理**：
- 创建、重命名、删除文件夹
- 层级结构管理
- 拖拽移动书签到文件夹
- 颜色标签区分

**软删除机制**：
- 删除后进入回收站
- 支持恢复和彻底删除
- 防止误操作

### 🔍 搜索和过滤

**实时搜索**：
- 模糊匹配：标题、URL、标签、摘要、分类
- 支持拼音搜索
- 搜索结果高亮显示
- 即时响应

**多维过滤**：
- **Chrome**: 与 Chrome 同步的书签
- **AI分类**: 技术文档、工具、教程等
- **星标**: 重要书签
- **最近**: 最近 7 天添加
- **热门**: 访问次数 Top 20
- **回收站**: 已删除的书签

### ⚡ 键盘快捷键

**全局快捷键**：
- `Ctrl+Shift+B` / `Cmd+Shift+B`: 打开/关闭侧边栏
- `Alt+A`: 唤起 AI 智能助手
- `Ctrl+J` / `Cmd+J`: 快速保存当前页面

**导航快捷键**：
- `↑`/`k`: 上一个书签
- `↓`/`j`: 下一个书签
- `Enter`: 打开书签
- `Space`: 预览书签
- `o`: 在新标签页打开

**操作快捷键**：
- `s`: 标记/取消星标
- `e`: 编辑书签
- `d`: 删除/移至回收站
- `/`: 开始搜索
- `Esc`: 取消/退出
- `?` / `h`: 显示帮助

**回收站快捷键**：
- `r`: 恢复书签
- `d`: 彻底删除

## 🛠️ 技术栈

- **前端框架**: React 18 + TypeScript
- **构建工具**: Vite 5
- **状态管理**: Zustand 4.4
- **UI 组件**: Lucide React (图标)
- **浏览器扩展**: Chrome Extension Manifest V3
- **AI 集成**: 支持所有兼容 OpenAI API 的模型

## 📁 项目结构

```
src/
├── sidebar/              # 侧边栏主界面
│   ├── components/       # React 组件
│   │   ├── AIChatPanel/        # AI 聊天面板
│   │   ├── BookmarkList/       # 书签列表
│   │   ├── FilterTabs/         # 过滤器标签
│   │   ├── FloatingChat/       # 浮动 AI 助手
│   │   ├── SaveConfirmDialog/  # AI 分析确认对话框
│   │   ├── FolderSelector/     # 文件夹选择器
│   │   ├── PreviewPanel/       # 预览面板
│   │   ├── SearchBar/          # 搜索栏
│   │   ├── Settings/           # 设置面板
│   │   └── ...                 # 其他组件
│   ├── store/            # Zustand 状态管理
│   │   └── bookmarkStore.ts   # 书签状态
│   └── Sidebar.tsx       # 主组件
├── utils/               # 工具函数
│   ├── aiAgent.ts        # AI 助手核心逻辑
│   ├── aiAnalyzer.ts     # AI 分析器
│   ├── localAnalyzer.ts  # 本地 AI 分析器
│   ├── chromeSync.ts     # Chrome 书签同步
│   └── searchEngine.ts   # 搜索引擎
├── types/               # TypeScript 类型定义
│   └── bookmark.ts       # 书签相关类型
└── background/          # Service Worker
    └── index.ts          # 后台服务
```

## 🤝 贡献

欢迎提交 Issues 和 Pull Requests！

### 开发指南

1. Fork 项目
2. 创建特性分支: `git checkout -b feature/amazing-feature`
3. 提交更改: `git commit -m 'Add amazing feature'`
4. 推送到分支: `git push origin feature/amazing-feature`
5. 提交 Pull Request

### 行为准则

- 使用清晰的提交信息
- 遵循现有的代码风格
- 添加清晰的注释
- 确保构建通过

## 🔒 隐私声明

- **100% 本地化**: 所有数据存储在本地，不上传到任何服务器
- **无追踪**: 不收集任何用户数据和行为分析
- **开源透明**: 源代码完全公开，可以自行审计
- **API Key 安全**: API Key 存储在本地，只用于直接调用 AI 服务

## 🚀 更新计划

- [ ] 移动端适配
- [ ] 书签导出为 HTML/Markdown
- [ ] 更多 AI 模型预设
- [ ] 书签分享功能
- [ ] 浏览历史集成
- [ ] 自定义主题颜色

## ❓ 常见问题

**Q: 为什么需要配置 API Key？**  
A: AI 功能需要调用大语言模型。您可以选择使用免费的本地分析，或配置自己的 API Key 获得更好的 AI 体验。

**Q: 数据会上传到云端吗？**  
A: 不会。所有数据都存储在本地，只有在使用 AI 功能时会将书签信息发送给您配置的 AI 服务商。

**Q: 支持哪些浏览器？**  
A: 目前支持 Chrome 和所有基于 Chromium 的浏览器（Edge、Brave 等）。

**Q: AI 助手能做什么？**  
A: AI 助手像图书管理员一样，可以帮你搜索、整理、分类书签，还可以闲聊。当你让它保存网页时，AI 会自动分析页面内容，生成摘要和标签，并推荐存放文件夹。你可以在确认对话框中预览、编辑后再保存。对话历史会自动保存（最多 50 条），支持连续对话。

**Q: 对话历史会自动清空吗？**  
A: 不会。对话历史会持久化保存在本地，最多保留 50 条。只有用户主动点击清空按钮才会删除。

**Q: 为什么推荐自动刷新？**  
A: Agent 操作后自动刷新页面，确保 UI 显示的数据与实际状态一致，用户体验更流畅。

**Q: 什么是 Agent Loop？**  
A: Agent Loop 是 AI 助手的工作模式：意图识别（理解用户说什么）→ 执行操作（去书签库操作）→ 反馈结果（告诉用户结果）。就像真人管理员的工作流程。

## 📄 许可证

MIT License

## 🙏 致谢

感谢所有为这个项目做出贡献的开发者们！
